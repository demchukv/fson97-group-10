import{p as m,g as i,s as p,i as y}from"./assets/scroll-up-97decd0b.js";import{a as f,P as q}from"./assets/vendor-ecc6328a.js";const R=document.querySelector(".generated-quote-container");document.addEventListener("DOMContentLoaded",D);function D(){const e=localStorage.getItem("quoteData"),t=localStorage.getItem("quoteDate"),s=new Date().getDate();if(e&&t&&parseInt(t)===s){const{author:n,quote:d}=JSON.parse(e);w(n,d)}else H()}function H(){fetch("https://energyflow.b.goit.study/api/quote",{method:"GET",headers:{Accept:"application/json"}}).then(e=>e.json()).then(e=>{localStorage.setItem("quoteData",JSON.stringify(e)),localStorage.setItem("quoteDate",new Date().getDate());const{author:t,quote:s}=e;w(t,s)}).catch(e=>{console.error("Error:",e)})}function w(e,t){const s=`
    <h2 class="quote-header">Quote of the day</h2>
    <p class="quote-text">${t}</p>
    <h3 class="quote-author">${e}</h3>`;R.innerHTML=s}const o={gallery:document.querySelector(".gallery"),buttons:document.querySelector(".exercises-btns-div"),pagination:document.getElementById("pagination"),musclesBtn:document.querySelector('[data-filter="muscles"]'),bodypartsBtn:document.querySelector('[data-filter="bodypart"]'),equipBtn:document.querySelector('[data-filter="equipment"]')};let v=!0;f.defaults.baseURL="https://energyflow.b.goit.study/api";const r={perPage:12,page:1,filter:"Muscles",totalPages:1,totalItems:0};async function U(){return m(".gallery","set"),o.gallery.innerHTML="",i(),(await f.get("/filters",{params:{filter:r.filter,page:r.page,limit:r.perPage}})).data}function G(e){const t=e.map(({name:s,filter:n,imgUrl:d})=>`<li class="gallery-item">
        <a href="">
        <img class="gallery-image" src="${d}" alt="Galllery Image">
            <ul class="gallery-item-description" data-exercises="${s}">
                <li class="name">${s}</li>
                <li class="filter">${n}</li>
            </ul>
        </a>
    </li>`).join("");o.gallery.innerHTML=t,i("hide")}function x(){U().then(e=>{const{results:t,totalPages:s,page:n}=e;G(t),m(".gallery","unset"),v&&(r.totalPages=s,r.totalItems=s*r.perPage,j())}).catch(e=>{i("hide"),p(e.message,"ERROR")})}x();o.musclesBtn.classList.add("active");o.buttons.addEventListener("click",e=>{N(e);const t=e.target;r.page=1,v=!0,t!==e.currentTarget&&(t===o.musclesBtn?r.filter="Muscles":t===o.bodypartsBtn?r.filter="Body parts":t===o.equipBtn&&(r.filter="Equipment"),x(),k())});let u=null;function N(e){const t=e.target.nodeName==="BUTTON";o.musclesBtn.classList.remove("active"),t&&(e.target.classList.add("active"),u!==null&&u.classList.remove("active"),u=e.target,u===u&&u.classList.add("active"))}function j(){if(v=!1,r.totalItems>r.perPage)new q("pagination",{totalItems:r.totalItems,itemsPerPage:r.perPage,visiblePages:3}).on("afterMove",function(t){r.page=t.page,x(),k()});else{const e=document.querySelector("#pagination");e.innerHTML=""}}function k(){const e=o.buttons.getBoundingClientRect();window.scrollBy({top:e.y,left:0,behavior:"smooth"})}const a={page:1,totalPages:1,totalItems:0,keyword:"",filter:"",filterGroup:"",limit:12},c=document.querySelector(".gallery");c&&(c.addEventListener("click",A),c.classList.add("exercises-card"));const S=document.querySelector(".search-btn"),g=document.querySelector(".search-clear-btn"),l=document.querySelector(".search-input"),L=document.querySelector(".exercises-btns-div"),E=document.querySelector(".ex-search"),B=document.querySelector(".exercises-header"),P=document.querySelector("#pagination"),T=document.querySelector("#pager");function A(e){if(e.preventDefault(),e.target.closest("ul").dataset.exercises){P.style.display="none",T.style.display="block",S.addEventListener("click",C),g.addEventListener("click",I),l.addEventListener("input",M),L.addEventListener("click",$),E.style.display="block";const t=document.querySelector(".exercises-button.active");a.filter=t.dataset.filter,a.filterGroup=e.target.closest("ul").dataset.exercises;const s=`Exercises / <span class="head-small">${a.filterGroup.charAt(0).toUpperCase()+a.filterGroup.slice(1)}</span>`;B.innerHTML=s,h(a.filter)}}function C(e){e.preventDefault(),l.value.length>3&&(a.page=1,a.keyword=l.value.trim().toLowerCase(),h(a.filter,!0))}function h(e,t=!0){m(".gallery","set"),c.innerHTML="",F(e).then(s=>{a.totalPages=s.totalPages,a.totalItems=a.limit*s.totalPages,s.results.length===0?(c.innerHTML='<p class="ex-list-no-result">Unfortunately, <span class="accent-text">no results</span> were found. You may want to consider other search options to find the exercise you are looking for. Our range is wide and you have the opportunity to find more options that suit your needs.</p>',b()):(Q(s.results),m(".gallery","unset"),t&&b()),i("hide")}).catch(s=>{i("hide"),p(s.message,"ERROR")})}async function F(e){return i(),l.value.length>3?a.keyword=l.value.trim().toLowerCase():a.keyword="",(await f.get("/exercises",{params:{[e]:a.filterGroup,keyword:a.keyword,page:a.page,limit:a.limit}})).data}function Q(e){let t=e.map(n=>`<li class="exercise-item" data-id="${n._id}">
      <p class="ex-item-head">
      <span class="ex-item-head-group">
      <span class="ex-item-workout">WORKOUT</span>
      <span class="ex-rating-group">
      <span class="ex-item-rating">${Number(n.rating).toFixed(1)}</span>
      <svg class="ex-star-icon" width="18" height="18"><use href="${y}#icon-star"></use></svg>
      </span>
      </span>
      <a class="ex-item-start" href="#" data-id="${n._id}"><span>Start</span> <svg class="ex-arrow-icon" width="14" height="14"><use href="${y}#icon-arrow-start"></use></svg></a>
      </p>
      <span class="ex-title">
      <span class="ex-run-men"><svg class="ex-icon-run" width="14" height="14"><use href="${y}#icon-running_man"></use></svg></span>
      <h3 class="ex-item-name">${n.name.charAt(0).toUpperCase()+n.name.slice(1)}</h3>
      </span>
      <p class="ex-item-info">
      <span class="ex-info-group"><span class="ex-item-desc">Burned calories:</span> <span class="ex-item-value">${n.burnedCalories} / ${n.time} min</span></span>
      <span class="ex-info-group"><span class="ex-item-desc">Body part:</span> <span class="ex-item-value">${n.bodyPart.charAt(0).toUpperCase()+n.bodyPart.slice(1)}</span></span>
      <span class="ex-info-group"><span class="ex-item-desc">Target:</span> <span class="ex-item-value">${n.target.charAt(0).toUpperCase()+n.target.slice(1)}</span></span>
      </p>
      </li>`).join("");c.innerHTML=t;const s=L.getBoundingClientRect();window.scrollBy({top:s.y,left:0,behavior:"smooth"})}function b(){if(a.totalItems>a.limit)new q("pager",{totalItems:a.totalItems,itemsPerPage:a.limit,visiblePages:3}).on("afterMove",function(t){a.page=t.page,h(a.filter,!1)});else{const e=document.querySelector("#pager");e.innerHTML=""}i("hide")}function I(){l.value="",g.style.visibility="hidden",a.page=1,h(a.filter,a.filterGroup)}function M(){l.value.length>0?g.style.visibility="visible":g.style.visibility="hidden"}function $(e){e.target.tagName==="BUTTON"&&(l.value="",E.style.display="none",c.innerHTML="",c.classList.remove("exercises-card"),S.removeEventListener("click",C),g.removeEventListener("click",I),l.removeEventListener("input",M),L.removeEventListener("click",$),T.style.display="none",P.style.display="block",a.page=1,B.innerHTML="Exercises")}const O=document.querySelector(".footer-form");async function _(e){return f.post("https://energyflow.b.goit.study/api/subscription",e)}O.addEventListener("submit",J);function J(e){e.preventDefault();const t=e.currentTarget.email.value.trim().toLowerCase();if(t===""){p("The email field is empty!","ERROR");return}const s={email:t};i("show"),_(s).then(({data:n,status:d})=>{d===201&&(i("hide"),p(n.message,"OK"))}).catch(n=>{n.response.status===409?(i("hide"),p("Subscription already exists!")):(p(n.message,"ERROR"),i("hide"))}).finally(O.reset())}
//# sourceMappingURL=commonHelpers2.js.map
